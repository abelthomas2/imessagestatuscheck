````markdown
# process_imessage_numbers

A simple Python utility to check which phone numbers in your list are iMessage-enabled, using the BlueBubbles API. Ideal for anyone—technical or not—who wants to filter a list of phone numbers down to only those that can receive iMessages.

---

## 📋 Features

- Reads a plain CSV file of phone numbers (one per line).
- Normalizes numbers to US E.164 format (e.g. `+1XXXXXXXXXX`).
- Deduplicates entries automatically.
- Checks iMessage availability via your local BlueBubbles server.
- Outputs a new CSV containing only the iMessage-enabled numbers.

---

## 🔧 Prerequisites

1. **Python 3.6+** installed on your computer. [Download here](https://www.python.org/downloads/).
2. A running **BlueBubbles** macOS server:
   - Install the BlueBubbles app and configure it as described in the [BlueBubbles documentation](https://github.com/BlueBubblesApp/BlueBubbles).
   - Ensure you have the **server URL** and **API password** generated by BlueBubbles.

3. Two files in your `process_imessage_numbers` folder:
   - `credentials.txt` containing **only** your BlueBubbles **server URL** on the first line.
   - `pwd.txt` containing **only** your BlueBubbles **API password** on the first line.

---

## 🚀 Quick Start

1. **Clone this repository** to your local machine:

   ```bash
   git clone https://github.com/yourusername/process_imessage_numbers.git
   cd process_imessage_numbers
````

2. **Prepare your input**:

   * Create a file called `input_numbers.csv` in this folder.
   * List one phone number per line (no headers, no extra columns):

     ```csv
     555-123-4567
     (555) 234-5678
     +1 555 345 6789
     ```

3. **Add your BlueBubbles credentials**:

   ```bash
   echo "http://localhost:1234" > credentials.txt
   echo "your_api_password_here" > pwd.txt
   ```

4. **Run the script**:

   ```bash
   python process_imessage_numbers.py input_numbers.csv --output imessage_only.csv
   ```

   * **`--output`** is optional (defaults to `imessage_numbers.csv`).

5. **View the results**:

   * Open `imessage_only.csv` (or your chosen output file) to see only the iMessage-enabled phone numbers.

---

## 🔍 How It Works

1. **Reads** each line of your input file.
2. **Cleans** non-digit characters, normalizes to `+1XXXXXXXXXX` format.
3. **Deduplicates** entries to avoid repeat checks.
4. **Waits** a random 5–10 seconds between each check to prevent rate-limits.
5. **Sends** a request to your BlueBubbles server API endpoint `/api/v1/handle/availability/imessage`.
6. **Parses** the JSON response, keeping only phone numbers where `data.available == true`.
7. **Writes** the filtered list to your specified output CSV.

---

## ❓ Troubleshooting

* **Script errors during startup**: Ensure `credentials.txt` and `pwd.txt` exist and contain valid values.
* **Permission denied**: Run the script with a Python virtual environment or with `sudo` if necessary.
* **Empty output**: No numbers in your list are iMessage-enabled, or your BlueBubbles server isn’t reachable. Verify your server URL and password.

---

## 📖 License

This project is licensed under the MIT License. See [LICENSE](LICENSE) for details.

---

*Happy messaging!*

```
``` 
